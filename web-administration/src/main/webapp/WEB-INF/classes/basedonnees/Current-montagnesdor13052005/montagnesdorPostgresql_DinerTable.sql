--tbd_id : Identifiant de la table
--roo_id : Identifant de la salle dans laquelle se trouve cette table
--tbd_number : Numéro de la table
--tbd_customers_number : Nombre de personnes occupant la table
--tbd_quantites_sum : Somme de toutes les quantités commandées par la table
--tbd_accounts_sum : Somme de tous les montants de chaque lignes de commande
--tbd_reduction_ratio : Taux de réduction pour cette table
--tbd_amount_paid : Somme réellement due par la table : faisant intervenir le taux de réduction
--tbd_registration_date : Date d'enregistrement de la table dans la base de données
--tbd_print_date : Date d'impression de la table
--tbd_cashing_date : Date d'encaissement de la table
--tbd_reduction_ration_changed : Permet de savoir si l'utilisateur a volontairement changé le taux de réduction
CREATE TABLE t_diner_table
(
  tbd_id serial,
  roo_id int8 NOT NULL DEFAULT 0,
  tbd_number varchar(5) NOT NULL,
  tbd_customers_number int8 NOT NULL DEFAULT 0,
  tbd_quantities_sum numeric(10,2) NOT NULL DEFAULT 0.00,
  tbd_amounts_sum numeric(10,2) NOT NULL DEFAULT 0.00,
  tbd_reduction_ratio numeric(10,2) NOT NULL DEFAULT 0.00,
  tbd_amount_paid numeric(10,2) NOT NULL DEFAULT 0.00,
  tbd_registration_date timestamp,
  tbd_print_date timestamp,  
  tbd_cashing_date timestamp,  
  tbd_reduction_ratio_changed int2 NOT NULL DEFAULT 0,
  CONSTRAINT tbd_id_pk PRIMARY KEY (tbd_id)
) WITHOUT OIDS;
-----------------------------------------------------
-- DATA
-----------------------------------------------------
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3233, 0, '1', 2, '4', '20', '0', '20', '2003-04-06 13:50:01', '0103-05-01 10:04:52', '2003-05-29 21:45:12', 1);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3218, 0, 'E', 0, '1', '119', '0', '119', '2003-03-25 21:26:18', '2003-03-25 21:27:26', '2003-03-25 21:27:38', 1);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3217, 0, 'E', 0, '5', '35', '5', '33.5', '2003-03-25 21:24:01', '2003-03-25 21:24:25', '2003-03-25 21:24:56', 1);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3219, 0, 'E1', 0, '1', '105', '0', '105', '2003-03-25 21:27:59', '2003-03-25 21:28:01', '2003-03-25 21:28:41', 1);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3223, 0, '2', 2, '2', '14', '0', '14', '2003-04-02 20:42:38', '2003-04-02 20:58:21', '2003-04-02 21:30:08', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3221, 0, '10', 2, '6', '32', '2', '31.5', '2003-03-30 18:21:59', '2003-04-02 21:24:42', '2003-04-02 21:29:48', 1);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3222, 0, '1', 2, '4', '16', '0', '16', '2003-04-02 20:42:30', '2003-04-02 21:23:29', '2003-04-02 21:29:43', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3224, 0, '3', 2, '1', '7', '0', '7', '2003-04-02 20:42:46', '2003-04-02 20:58:25', '2003-04-02 21:30:14', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3225, 0, '4', 2, '1', '7', '0', '7', '2003-04-02 20:42:54', '2003-04-02 20:42:56', '2003-04-02 21:30:19', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3226, 0, '5', 2, '2', '14', '0', '14', '2003-04-02 20:43:16', '2003-04-02 20:43:19', '2003-04-02 21:30:24', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3227, 0, '6', 2, '1', '4.5', '0', '4.5', '2003-04-02 20:43:29', '2003-04-02 20:43:30', '2003-04-02 21:30:30', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3228, 0, '7', 2, '1', '7', '0', '7', '2003-04-02 20:43:35', '2003-04-02 20:43:37', '2003-04-02 21:30:39', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3229, 0, '8', 2, '1', '7', '0', '7', '2003-04-02 20:43:42', '2003-04-02 20:43:44', '2003-04-02 21:30:44', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3230, 0, '11', 2, '1', '4', '0', '4', '2003-04-02 20:43:48', '2003-04-02 20:43:49', '2003-04-02 21:29:53', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3231, 0, '12', 2, '1', '4', '0', '4', '2003-04-02 20:43:54', '2003-04-02 20:43:55', '2003-04-02 21:29:58', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3232, 0, '13', 2, '1', '7', '0', '7', '2003-04-02 21:19:46', '2003-04-02 21:21:44', '2003-04-02 21:30:03', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3243, 0, 'E', 0, '2', '9', '0', '9', '2003-03-30 01:25:34', '2003-04-20 01:25:38', '2003-04-20 01:26:01', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3244, 0, 'E1', 0, '2', '13', '0', '13', '2003-03-30 01:26:15', '2003-04-20 01:26:18', '2003-04-20 01:26:28', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3245, 0, '11', 2, '2', '11.5', '0', '11.5', '2003-03-30 01:26:54', '2003-04-20 01:26:58', '2003-04-20 01:27:07', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3246, 0, '123', 1, '21', '99.5', '0', '99.5', '2003-04-20 21:57:36', '2003-04-20 22:48:25', '2003-04-21 00:22:19', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3249, 0, '5', 2, '1', '4.5', '0', '4.5', '2003-04-22 00:27:20', '2003-05-25 19:16:16', '2003-05-29 21:58:41', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3255, 0, '1', 2, '1', '7', '0', '7', '2003-05-29 18:13:51', '2003-05-29 21:59:21', '2003-05-29 21:59:36', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3256, 0, '1', 2, '1', '7', '0', '7', '2003-05-29 22:01:01', '2003-05-29 22:01:18', '2003-05-29 22:01:33', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3257, 0, '1', 2, '1', '7', '0', '7', '2003-05-29 22:01:01', '2003-05-29 22:03:34', '2003-05-29 22:03:46', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3258, 0, '1', 2, '1', '7', '0', '7', '2003-05-29 22:04:07', '2003-05-29 22:08:10', '2003-05-29 22:08:54', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3259, 0, '1', 4, '2', '14', '0', '14', '2003-05-29 22:09:26', '2003-06-01 17:37:08', '2003-06-01 17:37:29', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3261, 0, '1', 9, '5', '35', '0', '35', '2003-06-06 22:27:27', '2003-06-06 22:42:14', '2003-06-14 21:52:17', 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3263, 0, '3', 1, '10', '65', '8', '60', '2003-09-18 21:36:37', '2003-09-20 13:37:48', NULL, 1);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3264, 0, '4', 2, '2', '11.5', '0', '11.5', '2003-09-18 21:43:51', NULL, NULL, 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3268, 0, '1', 2, '10', '30.5', '0', '30.5', '2003-10-07 21:49:55', NULL, NULL, 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3267, 0, '5', 2, '0', '0', '0', '0', '2003-10-06 22:07:04', NULL, NULL, 0);
INSERT INTO t_diner_table (tbd_id, roo_id, tbd_number, tbd_customers_number, tbd_quantities_sum, tbd_amounts_sum, tbd_reduction_ratio, tbd_amount_paid, tbd_registration_date, tbd_print_date, tbd_cashing_date, tbd_reduction_ratio_changed) VALUES (3270, 0, '7', 2, '2', '23.5', '0', '23.5', '2003-11-30 19:32:31', NULL, NULL, 0);
